<!doctype html>
<html lang="en">

<head>
  <!-- Meta -->
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>GoLearn School</title>
  <meta name=description content="GoLearn School&trade; is Malaysia #1 teaching platform to run your tuition business and manage your lessons. Start now for Free!">
  <meta property=og:title content="GoLearn School">
  <meta property=og:site_name content="GoLearn School">
  <meta property=og:type content=website>
  <meta property=og:url content=https://app.golearn.com.my/school/teacher/ >
  <meta property=og:image content=https://app.golearn.com.my/assets/img/icon-apple-touch-180x180.png>
  <meta property=og:description content="GoLearn School&trade; is Malaysia #1 teaching platform to run your tuition business and manage your lessons. Start now for Free!">
  <link rel=apple-touch-icon sizes=180x180 href=https://app.golearn.com.my/assets/img/icon-apple-touch-180x180.png>
  <link rel=icon type=image/png sizes=32x32 href=https://app.golearn.com.my/assets/img/icon-32x32.png>
  <link rel=icon type=image/png sizes=16x16 href=https://app.golearn.com.my/assets/img/icon-16x16.png>
  <!-- Fonts and icons -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" rel="stylesheet" type="text/css" />
  <script src="https://kit.fontawesome.com/2bdd669e92.js" crossorigin="anonymous"></script>
  <!-- Material Kit CSS -->
  <link href="../../assets/css/material-dashboard.css?v=2.1.2" rel="stylesheet" />
  <!-- Firebase Init -->
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-storage.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-firestore.js"></script>
  <script src="../../assets/js/firebase.js"></script>
  <script>
    const orgUrl = new URL(window.location.href).searchParams.get("url");
    const orgEnt = new URL(window.location.href).searchParams.get("ent");
    if (orgUrl === null || orgUrl === "" || orgEnt === null || orgEnt === "")
      window.location.href = 'http://127.0.0.1:8080/';
  </script>
  <!-- Tutor Portal specific CSS -->
  <link href="../../assets/css/tutor-portal.css" rel="stylesheet" />
  <!-- GL Org CSS -->
  <link href="../../assets/css/golearn-org.css" rel="stylesheet" />
  <link rel="stylesheet" href="../../assets/css/intlTelInput.css">

  <style>
    .br {
      border-radius: 8px;
    }
    .w30 {
      width: 30%;
    }
    .w50 {
      width: 50%;
    }
    .w80 {
      width: 80%;
    }
    .card {
      border: 2px solid #fff;
      /* box-shadow:0px 0px 10px 0 #a9a9a9; */
      padding: 12px 20px;
      /* width: 80%; */
      /* margin: 50px auto; */
      margin-top: 0.2rem;
    }
    .card-shimmer-wrapper {
      width: 0px;
      animation: fullView 0.5s forwards cubic-bezier(0.250, 0.460, 0.450, 0.940);
    }
    .profilePic {
      height: 100px;
      width: 100px;
      border-radius: 50%;
      margin-bottom: 1.5rem;
    }
    .comment {
      height: 10px;
      background: #777;
      margin-top: 15px;
    }

    @keyframes fullView {
      100% {
        width: 100%;
      }
    }

    .animate {
      animation : shimmer 2s infinite linear;
      background: linear-gradient(to right, #eff1f3 4%, #e2e2e2 25%, #eff1f3 36%);
        background-size: 1000px 100%;
    }

    @keyframes shimmer {
      0% {
        background-position: -1000px 0;
      }
      100% {
        background-position: 1000px 0;
      }
    }
  </style>
</head>

<body>

  <div class="wrapper ">
    <div class="sidebar" data-color="purple" data-background-color="white" data-image="../../assets/img/sidebar-3.jpg">
      <div class="logo">
        <a href="../" class="simple-text logo-mini" style="padding: 0.5rem" id="logoName" name="param-link">
        </a>
      </div>
      <div class="sidebar-wrapper">
        <ul class="nav" style="margin-bottom: 50px;">
          <li class="nav-item" perm="home">
            <a class="nav-link" href="../" name="param-link">
              <i class="far fa-chart-bar fa-fw nav-icon"></i>
              <p>Dashboard</p>
            </a>
          </li>
          <li class="nav-item hidden" perm="insight">
            <a class="nav-link" href="../report/" name="param-link">
              <i class="far fa-lightbulb fa-fw nav-icon"></i>
              <p>Insight</p>
            </a>
          </li>
          <li class="nav-item hidden" perm="teach">
            <h4 class="nav-link" style="margin-left: 1rem;">Teaching</h4>
          </li>
          <li class="nav-item hidden" perm="teach-class">
            <a class="nav-link" href="../class/" name="param-link">
              <i class="fas fa-chalkboard fa-fw nav-icon"></i>
              <p>Classes</p>
            </a>
          </li>
		  		<li class="nav-item hidden" perm="teach-student">
            <a class="nav-link" href="../student/" name="param-link">
              <i class="fas fa-user-graduate fa-fw nav-icon"></i>
              <p>Students</p>
            </a>
          </li>
          <li class="nav-item hidden active" perm="teach-teacher">
            <a class="nav-link" href="../teacher/" name="param-link">
              <i class="fas fa-chalkboard-teacher fa-fw nav-icon"></i>
              <p>Teachers</p>
            </a>
          </li>
          <li class="nav-item hidden" perm="fin">
            <h4 class="nav-link" style="margin-left: 1rem;">Financial</h4>
          </li>
          <li class="nav-item hidden" perm="fin-invoice">
            <a class="nav-link" href="../invoice/" name="param-link">
              <i class="fas fa-file-invoice-dollar fa-fw nav-icon"></i>
              <p>Invoices</p>
            </a>
          </li>
          <li class="nav-item hidden" perm="fin-payroll">
            <a class="nav-link" href="../payroll/" name="param-link">
              <i class="fas fa-hand-holding-usd fa-fw nav-icon"></i>
              <p>Payroll <span style="visibility: hidden;">PRO</span></p>
            </a>
          </li>
          <li class="nav-item hidden" perm="fin-transaction">
            <a class="nav-link" href="../transaction/" name="param-link">
              <i class="fas fa-exchange-alt fa-fw nav-icon"></i>
              <p>Transactions</p>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="main-panel">
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top ">
        <div class="container-fluid">
          <div class="navbar-wrapper">
            <a class="navbar-brand" href="javascript:;">Teachers</a>
          </div>
          <button class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="navbar-toggler-icon icon-bar"></span>
            <span class="navbar-toggler-icon icon-bar"></span>
            <span class="navbar-toggler-icon icon-bar"></span>
          </button>
          <div class="collapse navbar-collapse justify-content-end">
            <form class="navbar-form">
              <!-- Put empty placeholder here -->
            </form>

            <ul class="navbar-nav">
              <li class="nav-item" id="activationNavItem">
                <a href="#" class="btn btn-primary btn-round btn-sm" style="visibility: hidden;" id="btnActivateAccount"></a>
              </li>
              <li class="nav-item">
                <a class="navbar-brand" href="javascript:;">
                   Hi <span id="user"></span> !
                </a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link" href="javascript:;" id="navbarDropdownNotification" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="material-icons">notifications</i> Notifications
                </a>
                <!-- <a class="nav-link" href="http://example.com" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="material-icons">notifications</i>
                  <span class="notification">5</span>
                  <p class="d-lg-none d-md-block">
                    Some Actions
                  </p>
                </a> -->
								<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
									<p style="padding: 1em;" >No notification</p>
                  <!-- <a class="dropdown-item" href="#">Mike John responded to your email</a>
                  <a class="dropdown-item" href="#">You have 5 new tasks</a>
                  <a class="dropdown-item" href="#">You're now friend with Andrew</a>
                  <a class="dropdown-item" href="#">Another Notification</a>
                  <a class="dropdown-item" href="#">Another One</a> -->
                </div>
              </li>
              <!-- your navbar here -->

			  			<li class="nav-item dropdown">
                <a class="nav-link" href="javascript:;" id="navbarDropdownProfile" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="material-icons">person</i>
                  <p class="d-lg-none d-md-block">
                    Account
                  </p>
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownProfile">
                  <a class="dropdown-item hidden" href="../settings/" name="param-link" perm="settings">Update Information</a>
                  <a class="dropdown-item hidden" href="../team/" name="param-link" perm="team">Team</a>
									<div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="../../">Back to Home</a>
                  <a class="dropdown-item" href="javascript:;" data-toggle="modal" data-target="#signOutModal" onclick="signOutFunction()" id="btn-logout">Log out</a>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <!-- End Navbar -->

			<!-- Modal Start -->
      <!-- Limit Reach modal -->
      <div class="row">
        <div class="modal fade" id="limitReachModal" tabindex="-1" role="dialog" aria-labelledby="limitReachModalLabel" aria-hidden="true">
          <div class="modal-dialog  modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Limit reached!</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body" >
                <p>
                  You have reached the maximum number of teacher available for your account.
                </p>
                <p>
                  Upgrade to <strong style="color: #2e74b6;">unlock more slots</strong> and enjoy a tonne of <strong style="color: #2e74b6;">other benefits</strong>.
                </p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Not Now</button>
                <a type="button" class="btn btn-primary" id="btnLimitReachModalUpdate" style="color: white;" href="https://golearn.com.my/pricing" target="_blank">Upgrade Now</a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Add Tutor modal -->
      <div class="row">
        <div class="modal fade" id="addTutorModal" tabindex="-1" role="dialog" aria-labelledby="addTutorModalLabel" aria-hidden="true">
          <div class="modal-dialog  modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="addTutorModalLabel">Invite New Teacher</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="btnAddTutorModalClose1">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body" id="addTutorModalBody">

                <div class="form-group" style="margin-top: 0rem;">
                  <span class="" style="font-size: smaller; font-weight: 300; color: gray; margin-bottom: 0;">New Teacher Registration Link</span>
                  <div class="input-group">
                    <span class="d-flex align-items-center input-group-addon" style="margin-right: 0.5em; cursor: pointer;" onclick="copyText('inAutoJoinLink')">
                      <span class="material-icons">
                        content_copy
                      </span>
                    </span>
                    <textarea type="text" value='' class="form-control" style="background-color: #f5f5f5;" id="inAutoJoinLink" row="auto" readonly></textarea>
                  </div>
                </div>

              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-primary hidden" data-dismiss="modal" data-toggle='modal' data-target='#createTutorModal' perm='teach-teacher-add'>Add Manually</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Create Tutor modal -->
      <div class="row">
        <div class="modal fade" id="createTutorModal" tabindex="-1" role="dialog" aria-labelledby="createTutorModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="createTutorModalLabel">Create New Teacher</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="btncreateTutorModalClose1">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body" id="createTutorModalBody">
                <!-- Info -->
                <div class="row">
                  <div class="col-md-4">
                    <div class="row">
                      <div class="col-md-12 text-center">
                        <div style="height: 140px; width: 140px; display: inline-block; position: relative; overflow: hidden; border-radius: 50%;">
                          <img id="viewTutorImgUrl" style="height: 100%;width: 100%; object-fit: cover;" src="../../assets/img/empty-photo.png"/>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-12 text-center">
                        <a type="button" class="btn btn-primary" href="#" id="btnViewTutorModalFullProfile" target="_blank" style="display: none;">View Full Profile</a>
                      </div>
                    </div>
                  </div>

                  <div class="col-md-8">


                    <div class="row">
                      <div class="col-md-12">
                        <span class="" style="font-size: smaller; font-weight: 300; color: gray; padding-right: 2rem;">Name*</span>
                        <input id="viewTutorName"  type="text" value='' class="form-control" data-compulsory="true" oninput="this.className = 'form-control'">
                      </div>
                      <div class="col-md-6">
                        <span class="" style="font-size: smaller; font-weight: 300; color: gray; padding-right: 2rem;">Phone*</span>
                        <div class="input-group">
                          <input id="viewTutorPhone" type="text" value='' class="form-control" data-compulsory="true">
                          <span id="valid-msg" class="hide" style="color: #42ba96;">âœ“ Valid</span>
                          <span id="error-msg" class="hide" style="color: #F32013;"></span>
                        </div>
                        <div class="row" id="checkTeacher" >
                          <div class="col-md-12">
                            <button class="btn btn-primary btn-sm" type="button" id="btnCheckTeacher">Check Teacher</button>
                            <span class="tooltiptext-trigger">?
                              <span class="tooltiptext-general">
                                <h6>Check Teacher</h6>
                                <p>Run a check to find out the teacher's public profile registed using the phone number above.</p>
                              </span>
                            </span>
                          </div>

                        </div>

                      </div>
                      <div class="col-md-6">
                        <span class="" style="font-size: smaller; font-weight: 300; color: gray; padding-right: 2rem;">Email*</span>
                        <input id="viewTutorEmail"  type="text" value='' class="form-control" data-compulsory="true" oninput="this.className = 'form-control'">

                      </div>
                    </div>


                    <div class="row">
                      <div class="col-md-6">
                        <span class="" style="font-size: smaller; font-weight: 300; color: gray; padding-right: 2rem;">Gender</span>
                        <div class="form-group">
                          <div class="form-check form-check-radio form-check-inline">
                            <label class="form-check-label">
                              <input class="form-check-input" type="radio" name="tutorGender" id="viewTutorGenderRadioMale" value="optionActive" data-compulsory="false" checked>
                              Male
                              <span class="circle">
                                <span class="check"></span>
                              </span>
                            </label>
                          </div>
                          <div class="form-check form-check-radio form-check-inline">
                            <label class="form-check-label">
                              <input class="form-check-input" type="radio" name="tutorGender" id="viewTutorGenderRadioFemale" value="optionInactive" data-compulsory="false">
                              Female
                              <span class="circle">
                                <span class="check"></span>
                              </span>
                            </label>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <span class="" style="font-size: smaller; font-weight: 300; color: gray; padding-right: 2rem;">Age</span>
                        <input id="viewTutorAge" type="number" value='24' class="form-control">
                      </div>
                    </div>

                  </div>

                </div>

                <!-- Employement Details -->
                <div class="row">
                  <div class="col-md-12">
                    <span>Employment Details</span>
                    <span class="tooltiptext-trigger">?
                      <span class="tooltiptext-general">
                        <h6>Employment Details</h6>
                        <p>Filling up employment details here will make running a payroll easier!</p>
                      </span>
                    </span>
                  </div>
                  <!-- Bank Name -->
                  <div class="col-md-4">
                    <div class="form-group">
                      <span class="" style="font-size: smaller; font-weight: 300; color: gray; margin-bottom: 0;">Bank Name</span>
                      <input type="text" class="form-control" id="inBankName" data-compulsory="false" oninput="this.className = 'form-control'" >
                    </div>
                  </div>

                  <!-- Bank Account Number -->
                  <div class="col-md-4">
                    <div class="form-group">
                      <span class="" style="font-size: smaller; font-weight: 300; color: gray; margin-bottom: 0;">Bank Account No</span>
                      <input type="text" class="form-control" id="inBankAcNo" data-compulsory="false" oninput="this.className = 'form-control'" >
                    </div>
                  </div>
                </div>

                <div class="row">
                 <!-- EPF No -->
                 <div class="col-md-4">
                  <div class="form-group" >
                    <span class="" style="font-size: smaller; font-weight: 300; color: gray; margin-bottom: 0;">EPF No</span>
                    <input type="text" class="form-control" id="inEPFNo" data-compulsory="false" oninput="this.className = 'form-control'">
                  </div>
                </div>

                <!-- Socso No -->
                <div class="col-md-4">
                  <div class="form-group" >
                    <span class="" style="font-size: smaller; font-weight: 300; color: gray; margin-bottom: 0;">Socso No</span>
                    <input type="text" class="form-control" id="inSocsoNo" data-compulsory="false" oninput="this.className = 'form-control'">
                  </div>
                </div>
                </div>

                <!-- Status -->
                <div class="row">
                  <div class="col-sm-12 text-left">
                    <span class="" style="font-size: smaller; font-weight: 300; color: gray;">Employment Status</span>
                    <span class="tooltiptext-trigger">?
                      <span class="tooltiptext-general">
                        <h6>Employment Status</h6>
                        <p>Set to <strong style="color: #2e74b6;">Inactive</strong> to keep the teacher profile, but disallowed from joining future classes and payrolls.</p>
                      </span>
                    </span>
                  </div>
                  <div class="col-md-12">
                    <div class="form-group">
                      <div class="form-check form-check-radio form-check-inline">
                        <label class="form-check-label">
                          <input class="form-check-input" type="radio" name="employmentStatus" id="employmentStatusRadioActive" value="optionActive" data-compulsory="false" checked>
                          Active
                          <span class="circle">
                            <span class="check"></span>
                          </span>
                        </label>
                      </div>
                      <div class="form-check form-check-radio form-check-inline">
                        <label class="form-check-label">
                          <input class="form-check-input" type="radio" name="employmentStatus" id="employmentStatusRadioInactive" value="optionInactive" data-compulsory="false">
                          Inactive
                          <span class="circle">
                            <span class="check"></span>
                          </span>
                        </label>
                      </div>
                    </div>
                  </div>
                </div>

              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" >Close</button>
                <button type="button" class="btn btn-primary" id="btnCreateTutorManuallyModalConfirm">Confirm</button>

              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Sign-out modal -->
      <div class="row">
        <div class="modal fade" id="signOutModal" tabindex="-1" role="dialog" aria-labelledby="signOutModalLabel" aria-hidden="true">
          <div class="modal-dialog  modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="signOutLabel">Logging Out</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body" id="signOutModalBody">
                Are you sure you want to continue?
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" id="btnSignOutModalUpdate">Confirm</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Main content -->
      <div class="content">
        <div class="container-fluid">
          <!-- your content here -->

          <!-- Main content -->
          <div class="row" id="desciption-row" >
            <!-- button -->
            <div class="d-flex flex-row">
              <a href="#" class="btn btn-default btn-round"  id="btnAddTeacher" style="pointer-events: none;">Add Teacher <i class="material-icons" style="color: white; margin-left: 0.5em; padding-bottom: 0.2em;">east</i></a>
            </div>

            <div class="col-lg-6 col-md-6 col-sm-6 ">
              <!-- <a class="d-flex justify-content-end" href="javascript:;" id="btnUpdate" style="margin-top: 1rem;" >About Premium Subjects</a> -->
            </div>
          </div>

          <!-- All Teachers -->
          <div class="row" id="card-all-tutor">
            <!-- <div class="col-lg-2 col-md-3 col-6">
              <div class="card-tutor text-center ">
                <div style="height: 100px;width: 100px; display: inline-block; position: relative; overflow: hidden; border-radius: 50%;">
                  <img id="tutorImgUrl" style="height: 100%;width: 100%; object-fit: cover;" src="../../assets/img/test.jpg"/>
                </div>
                <div style="margin-top:1rem">
                  <h4 id="className">Alric Liew </h4>
                </div>
              </div>
            </div> -->

            <!-- Loading block -->
            <div class="col-lg-2 col-md-3 col-6" id="card-load">
              <div class="card br" style="margin-top:1rem;">
                <div class="card-shimmer-wrapper text-center">
                  <div class="profilePic animate din"></div>
                  <div class="comment br animate w80"></div>
                  <div class="comment br animate"></div>

                </div>
              </div>
            </div>

            <!-- No data placeholder -->
            <div class="col-md-12 text-center" style="display: none; left: 50%;top: 50%; transform: translate(-50%, -50%);  position: absolute;"id="noDataPlaceholder">
              <!-- <div class="card align-items-center"> -->
                <div style="height: 100px;width: 100px; display: inline-block; position: relative; overflow: hidden; border-radius: 50%;">
                  <img id="tutorImgUrl" style="height: 100%;width: 100%; object-fit: cover;" src="../../assets/img/hello.gif"/>
                </div>
                <div style="margin-top:1rem; text-align: center;">
                  <h4 id="className">Ooops. No Teacher Found! </h4>
                  <!-- <a href="#" class="btn btn-outline-primary btn-round" data-target="#addTutorModal" data-toggle="modal">Invite Teacher</a> -->
                </div>
              <!-- </div> -->
            </div>


          </div>
        </div>

        <footer class="footer">
          <div class="container-fluid">
            <nav class="float-left">
            <ul>
              <!-- <li>
              <a href="https://golearn.com.my/join-us" target="_blank">
                Visit GoLearn Tutor
              </a>
              </li> -->
            </ul>
            </nav>
          </div>
        </footer>
      </div>
    </div>

  </div>


  <script src="../../assets/js/core/jquery.min.js"></script>
  <script src="../../assets/js/core/popper.min.js"></script>
  <script src="../../assets/js/core/bootstrap-material-design.min.js"></script>
  <script src="../../assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
  <!--  Notifications Plugin    -->
  <script src="../../assets/js/plugins/bootstrap-notify.js"></script>
  <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="../../assets/js/material-dashboard.js?v=2.1.2" type="text/javascript"></script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.min.js" integrity="sha384-lpyLfhYuitXl2zRZ5Bn2fqnhNAKOAaM/0Kr9laMspuaMiZfGmfwRNFh8HlMy49eQ" crossorigin="anonymous"></script>
  <!-- Common constants -->
  <script src="../../assets/js/common.js" type="text/javascript"></script>
  <!-- General Info -->
  <script src="../../assets/js/const.js" type="text/javascript"></script>
  <!-- Core Tutor Js -->
  <script src="../../assets/js/org-core.js" type="text/javascript"></script>
  <!-- International Telephone Input -->
  <script src="../../assets/js/plugins/intlTelInput/intlTelInput.min.js"  charset="utf-8"></script>

	<script>

    // Course-specific var
    var allCourseSize;

    const btnAddTeacher = document.getElementById("btnAddTeacher");

    // Initialization
    AuthCheck();

    // Page Specific Initialization
    function loadPageInitFunc(){

      // Load all tutor indo
      loadAllTutorInfo()

      // Update Add Teacher Registration Link
      let uriAdminId = encodeURIComponent(ent_id);
      document.getElementById("inAutoJoinLink").value = 'https://app.golearn.com.my/school/tutor-registration.html?aid='+uriAdminId;
    }

    // Tutor Specific
    function loadAllTutorInfo(){
      let docRef = db.collection("dev")
          .doc("v2")
          .collection("Tutor")
          .where(TUTOR_ADMIN_ID, "==", ent_id)
          .where(TUTOR_STATUS_ADMIN, "in", [TUTOR_STATUS_TYPE_ACTIVE, TUTOR_STATUS_TYPE_PASSIVE])
          .orderBy(TUTOR_TUTOR_NAME, 'asc')

      let adminTeacherNum = 0;

      docRef
      .get()
      .then((querySnapshot) => {

        document.getElementById("card-load").style.display = "none";

        if (( querySnapshot.docs.length== null || querySnapshot.docs.length == 0)){
        // if (( querySnapshot.docs.length== null || querySnapshot.docs.length == 0) && latestInvoiceDoc == null){
          document.getElementById("noDataPlaceholder").style.display = 'initial';
        }else{
          document.getElementById("noDataPlaceholder").style.display = 'none';
        }

        // Session Storage data
        let docsObj = [];

        querySnapshot.forEach((doc) => {
          docsObj.push(doc.data());
          // console.log(doc.data())
          renderAllActiveTutor(doc);

          adminTeacherNum = adminTeacherNum + 1;

        });

        // Store all docs data to sessionStorage
        sessionStorage.setItem(SESSION_STORAGE_TUTOR_ALL_DOCS_KEY, JSON.stringify(docsObj));
        sessionStorage.setItem(SESSION_STORAGE_TUTOR_CURRENT_DOC_KEY, null);

      })
      .then(() => {
        btnAddTeacher.className = "btn btn-primary btn-round";
        btnAddTeacher.style.pointerEvents = "auto";
        btnAddTeacher.setAttribute("data-toggle", "modal");
        btnAddTeacher.setAttribute("data-target", "#addTutorModal");


        // console.log(adminTeacherNum)
        // console.log(current_accountStatus)

        // if (current_accountStatus == DEACTIVATED_ACCOUNT_STATUS_KEY ||
        //   current_accountStatus == ACTIVE_ACCOUNT_STATUS_KEY||
        //   current_accountStatus == PREMIUM_ACCOUNT_1_STATUS_KEY){
        //   if (adminTeacherNum >= TeacherNum_Active){
        //     btnAddTeacher.className = "btn btn-default btn-round";
        //     btnAddTeacher.style.pointerEvents = "auto";
        //     btnAddTeacher.setAttribute("data-toggle", "modal");
        //     btnAddTeacher.setAttribute("data-target", "#limitReachModal");
        //   }else {
        //     btnAddTeacher.className = "btn btn-primary btn-round";
        //     btnAddTeacher.style.pointerEvents = "auto";
        //     btnAddTeacher.setAttribute("data-toggle", "modal");
        //     btnAddTeacher.setAttribute("data-target", "#addTutorModal");
        //   }
        // }
        // else if (current_accountStatus == PREMIUM_ACCOUNT_2_STATUS_KEY  || current_accountStatus == PREMIUM_ACCOUNT_2_ACTIVE_STATUS_KEY){
        //   if (adminTeacherNum >= TeacherNum_Premium2){
        //     btnAddTeacher.className = "btn btn-default btn-round";
        //     btnAddTeacher.style.pointerEvents = "auto";
        //     btnAddTeacher.setAttribute("data-toggle", "modal");
        //     btnAddTeacher.setAttribute("data-target", "#limitReachModal");
        //   }else {
        //     btnAddTeacher.className = "btn btn-primary btn-round";
        //     btnAddTeacher.style.pointerEvents = "auto";
        //     btnAddTeacher.setAttribute("data-toggle", "modal");
        //     btnAddTeacher.setAttribute("data-target", "#addTutorModal");
        //   }
        // }
        // else if (current_accountStatus == PREMIUM_ACCOUNT_3_STATUS_KEY || current_accountStatus == PREMIUM_ACCOUNT_3_ACTIVE_STATUS_KEY){
        //   if (adminTeacherNum >= TeacherNum_Premium3){
        //     btnAddTeacher.className = "btn btn-default btn-round";
        //     btnAddTeacher.style.pointerEvents = "auto";
        //     btnAddTeacher.setAttribute("data-toggle", "modal");
        //     btnAddTeacher.setAttribute("data-target", "#limitReachModal");
        //   }else {
        //     btnAddTeacher.className = "btn btn-primary btn-round";
        //     btnAddTeacher.style.pointerEvents = "auto";
        //     btnAddTeacher.setAttribute("data-toggle", "modal");
        //     btnAddTeacher.setAttribute("data-target", "#addTutorModal");
        //   }
        // }
        // else {
        //   // Deactivated or other status
        //   btnAddTeacher.className = "btn btn-default btn-round";
        //   btnAddTeacher.style.pointerEvents = "auto";
        //   btnAddTeacher.setAttribute("data-toggle", "modal");
        //   btnAddTeacher.setAttribute("data-target", "#limitReachModal");
        // }


      });

    };

    function renderAllActiveTutor(doc){
      // <div class="col-lg-2 col-md-3 col-6">
      //   <div class="card-tutor text-center" >
          // <div style="height: 100px;width: 100px; display: inline-block; position: relative; overflow: hidden; border-radius: 50%;">
          //   <img id="tutorImgUrl" style="height: 100% ;width: 100%; object-fit: cover;" src="../../assets/img/sidebar-1.jpg"/>
          // </div>
      //     <div style="margin-top:1rem">
      //       <h4 id="className">Alric Liew </h4>
      //     </div>
      //   </div>
      // </div>

      // Image
      let img = document.createElement('img');
      img.setAttribute('style', 'height: 100%; width: 100%; object-fit: cover;');
      // img.setAttribute('src', doc.data()[TUTOR_TUTOR_IMG_URL]);

      // Check if img is valid. If no, create a 2 chars avatar
      if (doc.data()[TUTOR_TUTOR_IMG_URL] == null || doc.data()[TUTOR_TUTOR_IMG_URL] == ""
      || doc.data()[TUTOR_TUTOR_IMG_URL] == "data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D"
      || tutorImgUrlChecker(doc.data()[TUTOR_TUTOR_IMG_URL])){
        let AvatarText = doc.data()[TUTOR_TUTOR_NAME][0] + doc.data()[TUTOR_TUTOR_NAME][1];
        img.src = generateAvatar(AvatarText, "#eaeaea", "#f6f6f6", "100px");
      }
      else {
        img.src = doc.data()[TUTOR_TUTOR_IMG_URL];
      }

      let img_div = document.createElement('div');
      img_div.setAttribute('style', 'height: 100px;width: 100px; display: inline-block; position: relative; overflow: hidden; border-radius: 50%;')
      img_div.appendChild(img)

      let name_h4 = document.createElement('h4');
      name_h4.textContent = doc.data()[TUTOR_TUTOR_NAME];
      let name_div = document.createElement('div');
      name_div.setAttribute('style', 'margin-top:1rem;');
      name_div.appendChild(name_h4);

      let tutor_div = document.createElement('div');
      tutor_div.className = "card-tutor text-center";
      tutor_div.appendChild(img_div);
      tutor_div.appendChild(name_div);

      let tutor_card_div = document.createElement('div');
      tutor_card_div.className = 'col-lg-2 col-md-3 col-6';
      tutor_card_div.setAttribute('onclick', 'editTeacherFunction(this)');
      // tutor_card_div.setAttribute('data-target', '#viewTutorModal');
      tutor_card_div.setAttribute('data-toggle', 'modal');
      tutor_card_div.setAttribute('data-id', doc.data()[TUTOR_ID]);
      tutor_card_div.appendChild(tutor_div)

      const card_all_tutor = document.getElementById("card-all-tutor");
      card_all_tutor.appendChild(tutor_card_div);
    }

    // This function check the validity of imgUrl. Return true when invalid.
    function tutorImgUrlChecker(imgUrl){
      // Tutor Panel
      let isHelloGifExist = false ;
      let helloGifArr =  imgUrl.match(/hello.gif/gi)
      if ( helloGifArr != null) {
        if (helloGifArr.length > 0){
          isHelloGifExist = true;
        }
      }
      let isEmptyPhotoPngExist = false;
      let emptyPhotoPngArr = imgUrl.match(/empty-photo.png/gi)
      if ( emptyPhotoPngArr != null) {
        if (emptyPhotoPngArr.length > 0){
          isEmptyPhotoPngExist = true;
        }
      }
      let isGeneratedAvatar = false;
      let generatedAvatarArr = imgUrl.match(/data:image\/png;base64,/gi)
      if ( generatedAvatarArr != null) {
        if (generatedAvatarArr.length > 0){
          isGeneratedAvatar = true;
        }
      }

      if (isHelloGifExist || isEmptyPhotoPngExist || isGeneratedAvatar)
        return true;
      else
        return false;
    }

    // Copy a text based on element ID
    function copyText(targetElemId){
      /* Get the text field */
      let copyText = document.getElementById(targetElemId);
      // console.log(copyText)
      // console.log(copyText.select())
      /* Select the text field */
      copyText.focus();
      copyText.select();
      copyText.setSelectionRange(0, 99999); /* For mobile devices */

      /* Copy the text inside the text field */
      navigator.clipboard.writeText(copyText.value);
      func.showNotification('top','center', 'success', 'check_circle', "Link copied.");
    }

    // Update Student Info
    function AddTeacherToDB(docId){
      let docRef = db.collection("dev")
        .doc('v2')
        .collection('Tutor')
        .doc();
        // console.log("Img Src valid? ", isValidImgSrc(document.getElementById("viewTutorImgUrl").src))

      let data = {
        [TUTOR_ID]: docRef.id,
        [TUTOR_ADMIN_ID]: ent_id,
        [TUTOR_TUTOR_ID]: itiTutor.getNumber(),
        [TUTOR_DATE_ADD]: new Date(),
        [TUTOR_DATE_EDIT]: new Date(),
        [TUTOR_DATE_DEL]: '',
        [TUTOR_STATUS_ADMIN]: document.getElementById("employmentStatusRadioActive").checked? TUTOR_STATUS_TYPE_ACTIVE : TUTOR_STATUS_TYPE_PASSIVE,
        [TUTOR_STATUS_TUTOR]: TUTOR_STATUS_TYPE_ACTIVE,
        // Admin specific
        [TUTOR_ADMIN_NAME]: ent_name,
        [TUTOR_ADMIN_PHONE]: ent_phone,
        [TUTOR_ADMIN_EMAIL]: ent_email,
        [TUTOR_ADMIN_ADDR]: "",
        [TUTOR_ADMIN_IMG_URL]: ent_imgUrl,
        [TUTOR_ADMIN_WEB_URL]: "",
        // Tutor specific
        [TUTOR_TUTOR_NAME]: document.getElementById("viewTutorName").value,
        [TUTOR_TUTOR_PHONE]: itiTutor.getNumber(),
        [TUTOR_TUTOR_EMAIL]: document.getElementById("viewTutorEmail").value,
        [TUTOR_TUTOR_GENDER]: document.getElementById("viewTutorGenderRadioMale").checked ? 0 : 1,
        [TUTOR_TUTOR_AGE]: parseInt(document.getElementById("viewTutorAge").value),
        [TUTOR_TUTOR_ADDR]: "",
        [TUTOR_TUTOR_IMG_URL]: isValidImgSrc(document.getElementById("viewTutorImgUrl").src) ? document.getElementById("viewTutorImgUrl").src : "",
        [TUTOR_TUTOR_WEB_URL]: "",

        [TUTOR_BANK_NAME]: document.getElementById("inBankName").value,
        [TUTOR_AC_NO]: document.getElementById("inBankAcNo").value,
        [TUTOR_EPF]: document.getElementById("inEPFNo").value,
        [TUTOR_SOCSO]: document.getElementById("inSocsoNo").value,
      }

      console.log("Create Data: ")
      console.log(data)

      // ----- Get the Teacher Number doc ----- //
      // So we can update it the next stage.
      let teacherNumReportDocRef = db.collection("dev")
        .doc("v2")
        .collection("General")
        .where(NUM_ADMIN_ID, "==", ent_id)
        .where(NUM_TYPE, "==", NUM_TYPE_TEACHER);

      var promiseAll = []
      promiseAll.push(docRef.set(data))
      // promiseAll.push(teacherNumReportDocRef.get())

      Promise.all(promiseAll).then((snapshots) => {

        // var promiseAllLayer2 = []
        // console.log(snapshots[0])
        // // console.log(snapshots[0].size)
        // console.log(snapshots[1])
        // console.log(snapshots[1].size)
        // if(snapshots[1].size == 0 ) {
        //   console.log("Empty teacher number report. Create a new one ");
        //   alert('Empty teacher number report. create a new one')
        //   let reportDocRef = db.collection("dev")
        //     .doc("v2")
        //     .collection("General")
        //     .doc();

        //   let reportData ={
        //     [NUM_ID]: reportDocRef.id,
        //     [NUM_ADMIN_ID]: ent_id,
        //     [NUM_TYPE]: NUM_TYPE_TEACHER,
        //     [NUM_VALUE]: 1,
        //     [NUM_DATE_EDIT]: new Date(),
        //   }
        //   console.log(reportData)
        //   promiseAllLayer2.push( reportDocRef.set(reportData, { merge: true }))

        // }
        // else if (snapshots[1].size > 1) {
        //   console.log("More than 1 teacher number reports. Report Admin ");
        //   alert('More than 1 teacher number reports. Report Admin')
        //   snapshots[1].forEach((doc) => {
        //     // console.log(doc.data());
        //     let reportDocRef = db.collection("dev")
        //       .doc("v2")
        //       .collection("General")
        //       .doc(doc.data()[NUM_ID]);

        //     let reportData ={
        //       // [NUM_ID]: reportDocRef.id,
        //       // [NUM_ADMIN_ID]: ent_id,
        //       // [NUM_TYPE]: ,
        //       [NUM_VALUE]: (doc.data()[NUM_VALUE] == null || doc.data()[NUM_VALUE] == "" || doc.data()[NUM_VALUE] == 0 || isNaN(doc.data()[NUM_VALUE])) ? 1 : parseInt(doc.data()[NUM_VALUE]) + 1,
        //       [NUM_DATE_EDIT]: new Date(),
        //     }
        //     console.log(reportData)
        //     promiseAllLayer2.push( reportDocRef.set(reportData, { merge: true }))

        //   });

        // }
        // else {
        //   snapshots[1].forEach((doc) => {
        //     // console.log(doc.data());
        //     let reportDocRef = db.collection("dev")
        //       .doc("v2")
        //       .collection("General")
        //       .doc(doc.data()[NUM_ID]);

        //     let reportData ={
        //       // [NUM_ID]: reportDocRef.id,
        //       // [NUM_ADMIN_ID]: ent_id,
        //       // [NUM_TYPE]: ,
        //       [NUM_VALUE]: (doc.data()[NUM_VALUE] == null || doc.data()[NUM_VALUE] == "" || doc.data()[NUM_VALUE] == 0 || isNaN(doc.data()[NUM_VALUE])) ? 1 : parseInt(doc.data()[NUM_VALUE]) + 1,
        //       [NUM_DATE_EDIT]: new Date(),
        //     }
        //     console.log(reportData)
        //     promiseAllLayer2.push( reportDocRef.update(reportData))

        //   });

        // }

        // return Promise.all(promiseAllLayer2)

        return Promise.resolve( updateGeneralReportNum(ent_id, NUM_TYPE_TEACHER, 'asc', 1) )
      })
      .then(() => {
        window.location.reload()
        // window.location.href='./' + window.location.search;
      })

      // docRef
      // .set(data)
      // .then(()=> {
      //   $('#createTutorModal').modal('hide');
      //   window.location.reload();
      // });
    }

    function isValidImgSrc(src){
      let isHelloGifExist = false ;
      let helloGifArr =  src.match(/hello.gif/gi)
      if ( helloGifArr != null) {
        if (helloGifArr.length > 0){
          isHelloGifExist = true;
        }
      }

      let isEmptyPhotoPngExist = false;
      let emptyPhotoPngArr = src.match(/empty-photo.png/gi)
      if ( emptyPhotoPngArr != null) {
        if (emptyPhotoPngArr.length > 0){
          isEmptyPhotoPngExist = true;
        }
      }

      let isBase64ImgExist = false;
      let base64ImgArr = src.match(/data:image\/png/gi)
      if ( base64ImgArr != null) {
        if (base64ImgArr.length > 0){
          isBase64ImgExist = true;
        }
      }

      if(isHelloGifExist || isEmptyPhotoPngExist || isBase64ImgExist){
        return false;
      }
      else {
        return true;
      }
    }
  </script>

  <script>
		$( document ).ready(function() {

      // Class Announcement
      // KEY, DATETIME, ID, JOB_STATUS and JOB_EXPLANATION var is global var used to simplify modal fire and hide.
      var KEY = ""; // Extract info from data-* attributes
      var DATETIME = ""; // Extract info from data-* attributes
      var ID = ""; // Extract info from data-* attributes
      var ANNOUNCEMENT = ""; // Extract info from data-* attributes

      // Update Class Annoucement
      $('#btnEditClassModalUpdate').on('click', function (e) {
        var docData = {
          [CLASS_ANNOUNCEMENT]: document.getElementById("modalClassAnnouncement").value,
        }
        // Set data
        db.collection("dev")
          .doc("v2")
          .collection("Class")
          .doc(ID)
          .set(docData, {merge: true})
          .then(() => {
            window.location = './class.html';
          })
          .catch((error) => {
              console.error("Error writing document: ", error);
          });;

			  $('#editClassModal').modal('hide');
		  });

      $('#editClassModal').on('show.bs.modal', function (event) {
        var button = $(event.relatedTarget) // Button/Components that triggered the modal
        ID = button.data('id') // Extract info from data-* attributes
        ANNOUNCEMENT = button.data('announcement') // Extract info from data-* attributes
        // Load Desription
        document.getElementById("modalClassAnnouncement").textContent = ANNOUNCEMENT;

      });

      // Clear key and fields in modal when modal dismiss
      $('#editClassModal').on('hide.bs.modal', function (event) {
        ID = "";
        ANNOUNCEMENT = "";
        document.getElementById("modalClassAnnouncement").textContent = "";
      });


      // Create Teacher Profile Manually
      $('#btnCreateTutorManuallyModalConfirm').on('click', function (e) {

        if (validateForm("createTutorModal") && itiTutor.getNumber() != "" && itiTutor.isValidNumber()) {


          if(itiTutor.getNumber() == ent_id){
            alert("INFO: You cannot add yourself as teacher!")
          }
          else {

            var validPhone =true;
            // Get attribute and
            if (JSON.parse(sessionStorage.getItem(SESSION_STORAGE_TUTOR_ALL_DOCS_KEY)) == null ){
              console.log("Error: Impossible to reach this state")
            }
            else{

              let allClassList = null;

              // Set the fields
              allClassList = JSON.parse(sessionStorage.getItem(SESSION_STORAGE_TUTOR_ALL_DOCS_KEY));

              for (var index = 0; index < allClassList.length; index++) {
              // allClassList.forEach((item) => {
                if (allClassList[index][TUTOR_TUTOR_ID] === itiTutor.getNumber()){
                  validPhone = false;
                  break;
                }

              };

            }

            if (validPhone){
              document.getElementById("btnCreateTutorManuallyModalConfirm").setAttribute('disabled', true);
              document.getElementById("btnCreateTutorManuallyModalConfirm").textContent = 'Creating... Please wait.';
              AddTeacherToDB();
            }
            else {
              alert("INFO: Teacher ("+ itiTutor.getNumber() +  ") already existed.");
            }

          }

        }
		  });

      // Clear key and fields in modal when modal dismiss
      $('#createTutorModal').on('hide.bs.modal', function (event) {

        document.getElementById("btnViewTutorModalFullProfile").style.display = "none";
        document.getElementById("btnViewTutorModalFullProfile").href = "#";
        document.getElementById("viewTutorImgUrl").src = "https://golearn.com.my/assets/img/empty-photo.png";
        document.getElementById("viewTutorName").value = "";
        itiTutor.setNumber("");
        // document.getElementById("viewTutorPhone").setNumber("");

        // document.getElementById("checkTeacher").style.display = "none";
        document.getElementById("viewTutorEmail").value = "";
        document.getElementById("viewTutorAge").value = 24;
        document.getElementById("viewTutorGenderRadioMale").checked = true;
        document.getElementById("inBankName").value = "";
        document.getElementById("inBankAcNo").value = "";
        document.getElementById("inEPFNo").value = "";
        document.getElementById("inSocsoNo").value = "";
        document.getElementById("employmentStatusRadioActive").checked = true;

        document.getElementById("btnCreateTutorManuallyModalConfirm").removeAttribute('disabled');
        document.getElementById("btnCreateTutorManuallyModalConfirm").textContent = 'Confirm';
      });

      $("#viewTutorName").blur(function(){
        updateImg();

      });

      // Create Teacher Profile Manually
      $('#btnCheckTeacher').on('click', function (e) {

        // console.log(itiTutor.getNumber())
        document.getElementById("btnCheckTeacher").setAttribute('disabled', true);
        document.getElementById("btnCheckTeacher").textContent = 'Checking...';

        if(itiTutor.getNumber() == ent_id){
          alert("INFO: You cannot add yourself as teacher!")
          document.getElementById("btnCheckTeacher").removeAttribute('disabled');
          document.getElementById("btnCheckTeacher").textContent = 'Check Teacher';

        }
        else if (itiTutor.getNumber() != "" && itiTutor.isValidNumber()) {


          let docRef = db.collection("Tutor").doc(itiTutor.getNumber());
          let tutorDocRef = db.collection("dev")
          .doc('v2')
          .collection('Tutor')
          .where(TUTOR_ADMIN_ID, "==", ent_id)
          .where(TUTOR_TUTOR_ID, "==", itiTutor.getNumber())

          var promiseAll = [];
          promiseAll.push(docRef.get());
          promiseAll.push(tutorDocRef.get());


          Promise.all(promiseAll)
          .then((querySnapshots) => {

            if (querySnapshots[1] != null && querySnapshots[1].docs.length > 0){
              // console.log("querySnapshots[1] data: ")
              // console.log(querySnapshots[1])

              updateImg();

              document.getElementById("btnViewTutorModalFullProfile").style.display = "none";
              document.getElementById("btnViewTutorModalFullProfile").href = "#";

              alert("INFO: Teacher ("+ itiTutor.getNumber() +  ") already existed.");
            }
            else {
              console.log("querySnapshots[1] is empty")

              // Check if Phone number is valid
              if (querySnapshots[0].exists) {
                // console.log("querySnapshots[0] data: ")
                // console.log(querySnapshots[0].data())

                document.getElementById("viewTutorImgUrl").src = (querySnapshots[0].data().imgUrl == null || querySnapshots[0].data().imgUrl == "")? "https://golearn.com.my/assets/img/empty-photo.png" : querySnapshots[0].data().imgUrl;

                document.getElementById("btnViewTutorModalFullProfile").style.display = "";
                let url = "https://golearn.com.my/tutor/?tid=" + encode64(itiTutor.getNumber());
                document.getElementById("btnViewTutorModalFullProfile").href = url;

                document.getElementById("viewTutorName").value = (querySnapshots[0].data().name == null || querySnapshots[0].data().name == "")? "" : querySnapshots[0].data().name;
                document.getElementById("viewTutorEmail").value = (querySnapshots[0].data().email == null || querySnapshots[0].data().email == "")? "" : querySnapshots[0].data().email;
                document.getElementById("viewTutorAge").value = (querySnapshots[0].data().age == null || querySnapshots[0].data().age == "")? "0" : querySnapshots[0].data().age;
                document.getElementById("viewTutorGenderRadioMale").checked =  (querySnapshots[0].data().gender == 0) ? true : false;
                document.getElementById("viewTutorGenderRadioFemale").checked =  (querySnapshots[0].data().gender == 1) ? true : false;
              }
              else {
                updateImg();

                document.getElementById("btnViewTutorModalFullProfile").style.display = "none";
                document.getElementById("btnViewTutorModalFullProfile").href = "#";

                alert("INFO: Teacher not found.")
              }

            }
          })
          .then(() => {
            document.getElementById("btnCheckTeacher").removeAttribute('disabled');
            document.getElementById("btnCheckTeacher").textContent = 'Check Teacher';
          });
        }
        else {

          updateImg();
          document.getElementById("btnViewTutorModalFullProfile").style.display = "none";
          document.getElementById("btnViewTutorModalFullProfile").href = "#";
          document.getElementById("btnCheckTeacher").removeAttribute('disabled');
          document.getElementById("btnCheckTeacher").textContent = 'Check Teacher';

          validateForm("createTutorModal");

          alert("Warning: Please enter a valid phone number.")

          document.getElementById("btnCheckTeacher").removeAttribute('disabled');
          document.getElementById("btnCheckTeacher").textContent = 'Check Teacher';

        }

      });


		});

  </script>

  <!-- More functions -->
  <script>

    function updateImg() {
      if (document.getElementById("viewTutorName").value.length >= 2){
        let AvatarText = document.getElementById("viewTutorName").value[0] + document.getElementById("viewTutorName").value[1];
        document.getElementById("viewTutorImgUrl").src = generateAvatar(AvatarText, "#eaeaea", "#f6f6f6", "100px");
      }
      else {
        document.getElementById("viewTutorImgUrl").src = "https://golearn.com.my/assets/img/empty-photo.png";
      }
    }


    function validateForm(id) {
      // This function deals with validation of the form fields with data-compulsory = 'true'
      var x, y, i, valid = true;
      // y = x[activePanelNum].getElementsByTagName("input") && x[activePanelNum].querySelectorAll('[type="text"]');
      y = document.getElementById(id).querySelectorAll('[data-compulsory="true"]');

      // A loop that checks every input field in the current tab:
      for (i = 0; i < y.length; i++) {
        // console.log(y[i].value)
        // If a field is empty...
        if (y[i].value == "") {
          // add an "invalid" class to the field:
          y[i].className += " invalid";
          // and set the current valid status to false:
          valid = false;
        }
      }
      // If the valid status is true, mark the step as finished and valid:
      if (valid) {
        // document.getElementsByClassName("step")[activePanelNum].className += " finish";
      }
      return valid; // return the valid status
    }


    function editTeacherFunction(elem){
      window.location.href = './edit-teacher.html' + "?url=" + orgUrl  +  "&ent=" + orgEnt + "&tid=" + elem.getAttribute('data-id')
    }

  </script>

  <!-- Teacher's Phone related -->
  <script>


    // Init Tutor Phone
    var inputTutor = document.querySelector("#viewTutorPhone");
    var itiTutor = intlTelInput(inputTutor,{
      autoHideDialCode: false,
      preferredCountries: ['my', 'sg'],
      separateDialCode: true,
      utilsScript: "https://golearn.com.my/assets/js/plugins/intlTelInput/utils.js",
      });

    var errorMsg = document.querySelector("#error-msg");
    var validMsg = document.querySelector("#valid-msg");

    // here, the index maps to the error code returned from getValidationError - see readme
    var errorMap = ["Invalid number", "Invalid country code", "Too short", "Too long", "Invalid number"];

    var reset = function() {
      inputTutor.classList.remove("error");
      errorMsg.innerHTML = "";
      errorMsg.classList.add("hide");
      validMsg.classList.add("hide");
    };

    // on blur: validate
    inputTutor.addEventListener('blur', function() {
      reset();
      if (itiTutor.getNumber() != "") {
        if (itiTutor.isValidNumber()) {
          validMsg.classList.remove("hide");

          // Remove the invalid tag on the phone input
          document.getElementById("viewTutorPhone").className = "form-control"

          document.getElementById("checkTeacher").setAttribute('style', "");
        } else {
          inputTutor.classList.add("error");
          var errorCode = itiTutor.getValidationError();
          errorMsg.innerHTML = errorMap[errorCode];
          errorMsg.classList.remove("hide");

          document.getElementById("checkTeacher").setAttribute('style', "display: none;");

        }
      }
      else {
          inputTutor.classList.add("error");
          var errorCode = itiTutor.getValidationError();
          errorMsg.innerHTML = errorMap[4];
          errorMsg.classList.remove("hide");

          document.getElementById("checkTeacher").setAttribute('style', "display: none;");

      }

    });

    // on keyup / change flag: reset
    inputTutor.addEventListener('change', reset);
    inputTutor.addEventListener('keyup', reset);
    // Validate fields in based on parents.
    function ValidateFields(parentId){
      // This function deals with validation of the form fields with data-compulsory = 'true'
      var x, y, i, valid = true;
      x = document.getElementById(parentId);
      y =x.querySelectorAll('[data-compulsory="true"]');

      // A loop that checks every input field in the current tab:
      for (i = 0; i < y.length; i++) {
        // console.log(y[i].value)
        // If a field is empty...
        if (y[i].value == "") {
          // add an "invalid" class to the field:
          y[i].className += " invalid";
          // and set the current valid status to false:
          valid = false;
        }
      }
      return valid; // return the valid status
    }

    // Validate fields - Phone Input specific.
    function ValidatePhone(phoneId){
      var valid = true;
      let inPhone = document.querySelector("#"+phoneId);
      // console.log(inPhone.value)
      if (itiTutor.getNumber() != "") {
        if (itiTutor.isValidNumber()) {
          // Do nothing
        } else {
          inPhone.className += " invalid";
          valid = false;
        }
      }else {
        valid = false;
      }
      return valid; // return the valid status
    }

  </script>

</body>

</html>